<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diagn√≥stico Worker Digital</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #040d1a;
    --surface: #071428;
    --surface2: #0c1e3a;
    --border: rgba(255,255,255,0.08);
    --accent: #3de8a0;
    --accent2: #5ff5b8;
    --gold: #a8edcc;
    --text: #f0faff;
    --muted: #6a90b8;
    --success: #3de8a0;
    --danger: #ff6b8a;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    top: -30%;
    left: -20%;
    width: 700px;
    height: 700px;
    background: radial-gradient(circle, rgba(61,232,160,0.07) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }
  body::after {
    content: '';
    position: fixed;
    bottom: -20%;
    right: -10%;
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, rgba(30,100,200,0.12) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    width: 100%;
    max-width: 640px;
  }

  /* PROGRESS */
  .progress-wrap {
    margin-bottom: 36px;
    display: none;
  }
  .progress-wrap.visible { display: block; }
  .progress-label {
    font-size: 12px;
    color: var(--muted);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 10px;
    font-family: 'Syne', sans-serif;
  }
  .progress-bar {
    height: 3px;
    background: var(--surface2);
    border-radius: 99px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #3de8a0, #a0f5d8);
    border-radius: 99px;
    transition: width 0.5s cubic-bezier(0.4,0,0.2,1);
    width: 0%;
  }

  /* CARD */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 48px 44px;
    box-shadow: 0 32px 80px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.06);
    display: none;
    animation: fadeUp 0.45s cubic-bezier(0.22,1,0.36,1) both;
  }
  .card.active { display: block; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* INTRO */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(61,232,160,0.1);
    border: 1px solid rgba(61,232,160,0.25);
    border-radius: 99px;
    padding: 6px 14px;
    font-size: 11px;
    font-family: 'Syne', sans-serif;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--accent2);
    margin-bottom: 28px;
  }
  .badge::before { content: '‚óà'; font-size: 10px; }

  h1 {
    font-family: 'Syne', sans-serif;
    font-size: clamp(28px, 5vw, 42px);
    font-weight: 800;
    line-height: 1.1;
    letter-spacing: -0.02em;
    margin-bottom: 18px;
  }
  h1 span { 
    background: linear-gradient(135deg, #3de8a0, #a0f5d8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .sub {
    color: var(--muted);
    font-size: 16px;
    line-height: 1.7;
    margin-bottom: 36px;
    font-weight: 300;
  }

  .stats-row {
    display: flex;
    gap: 24px;
    margin-bottom: 40px;
  }
  .stat {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .stat-num {
    font-family: 'Syne', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--text);
  }
  .stat-label {
    font-size: 12px;
    color: var(--muted);
  }
  .stat-divider {
    width: 1px;
    background: var(--border);
  }

  /* QUESTION */
  .q-eyebrow {
    font-family: 'Syne', sans-serif;
    font-size: 11px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: #3de8a0;
    margin-bottom: 12px;
  }
  h2 {
    font-family: 'Syne', sans-serif;
    font-size: clamp(20px, 3.5vw, 28px);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 8px;
  }
  .q-helper {
    font-size: 14px;
    color: var(--muted);
    margin-bottom: 28px;
  }

  .options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 32px;
  }

  .option {
    position: relative;
    padding: 16px 20px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 14px;
    cursor: pointer;
    display: flex;
    align-items: flex-start;
    gap: 14px;
    transition: all 0.2s ease;
    user-select: none;
  }
  .option:hover {
    border-color: rgba(61,232,160,0.4);
    background: rgba(61,232,160,0.05);
    transform: translateX(4px);
  }
  .option.selected {
    border-color: var(--accent);
    background: rgba(61,232,160,0.08);
  }
  .option.selected .opt-dot {
    background: var(--accent);
    box-shadow: 0 0 0 4px rgba(61,232,160,0.2);
    border-color: var(--accent);
  }
  .option.selected .opt-dot::after { opacity: 1; }

  .opt-dot {
    width: 22px;
    height: 22px;
    min-width: 22px;
    border-radius: 6px;
    border: 2px solid var(--muted);
    margin-top: 1px;
    position: relative;
    transition: all 0.2s ease;
  }
  .opt-dot::after {
    content: '‚úì';
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    font-size: 13px;
    font-weight: 800;
    color: white;
    opacity: 0;
    transition: opacity 0.2s;
    line-height: 1;
  }

  /* FIELD ERROR */
  .field input.error, .field select.error {
    border-color: var(--danger) !important;
    background: rgba(255,107,138,0.06);
  }
  .field-error {
    font-size: 12px;
    color: var(--danger);
    margin-top: -2px;
    display: none;
  }
  .field-error.visible { display: block; }

  .opt-text {
    flex: 1;
    font-size: 15px;
    font-weight: 400;
    line-height: 1.4;
  }
  .opt-emoji {
    font-size: 20px;
    margin-top: -1px;
  }

  /* INPUT FIELDS */
  .fields {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-bottom: 32px;
  }
  .field {
    display: flex;
    flex-direction: column;
    gap: 7px;
  }
  .field.full { grid-column: 1 / -1; }
  .field label {
    font-size: 12px;
    font-family: 'Syne', sans-serif;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--muted);
  }
  .field input, .field select {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 13px 16px;
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 15px;
    outline: none;
    transition: border-color 0.2s;
    -webkit-appearance: none;
  }
  .field input:focus, .field select:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(61,232,160,0.1);
  }
  .field input::placeholder { color: #44405a; }
  .field select option { background: #16162a; }

  /* BUTTONS */
  .btn {
    width: 100%;
    padding: 17px 24px;
    border-radius: 14px;
    border: none;
    font-family: 'Syne', sans-serif;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    letter-spacing: 0.02em;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  .btn-primary {
    background: linear-gradient(135deg, #2dd98a, #3de8a0);
    color: #04130f;
    box-shadow: 0 8px 32px rgba(61,232,160,0.3);
    font-weight: 800;
  }
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgba(61,232,160,0.45);
  }
  .btn-primary:active { transform: translateY(0); }
  .btn-primary:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
  }

  .btn-wa {
    background: linear-gradient(135deg, #25d366, #128c3e);
    color: white;
    box-shadow: 0 8px 24px rgba(37,211,102,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 12px;
    text-decoration: none;
  }
  .btn-wa:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(37,211,102,0.4);
  }

  .btn-ghost {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: 'DM Sans', sans-serif;
    font-weight: 400;
    font-size: 14px;
    margin-top: 10px;
  }
  .btn-ghost:hover {
    border-color: var(--accent);
    color: var(--text);
  }

  /* RESULT */
  .result-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 28px;
  }
  .worker-tag {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border-radius: 99px;
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.05em;
  }
  .tag-ideal {
    background: rgba(61,232,160,0.12);
    border: 1px solid rgba(61,232,160,0.35);
    color: #3de8a0;
  }
  .tag-upgrade {
    background: rgba(100,180,255,0.1);
    border: 1px solid rgba(100,180,255,0.25);
    color: #7ecfff;
  }

  .result-name {
    font-family: 'Syne', sans-serif;
    font-size: clamp(30px, 6vw, 48px);
    font-weight: 800;
    line-height: 1;
    letter-spacing: -0.03em;
  }
  .result-name span {
    background: linear-gradient(135deg, #3de8a0, #a0f5d8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .result-desc {
    font-size: 16px;
    line-height: 1.75;
    color: rgba(240,238,255,0.75);
    margin-bottom: 24px;
    font-weight: 300;
  }

  .worker-features {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 28px;
  }
  .feature-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    color: var(--text);
  }
  .feature-item::before {
    content: '‚Üí';
    color: var(--success);
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    flex-shrink: 0;
  }

  .price-box {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 28px;
    flex-wrap: wrap;
    gap: 12px;
  }
  .price-item {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .price-label { font-size: 11px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.1em; font-family: 'Syne', sans-serif; }
  .price-value { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 700; color: var(--text); }
  .price-divider { width: 1px; height: 40px; background: var(--border); }

  .upgrade-box {
    border: 1px solid rgba(100,180,255,0.2);
    background: rgba(100,180,255,0.04);
    border-radius: 16px;
    padding: 20px 24px;
    margin-bottom: 28px;
  }
  .upgrade-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 700;
    color: #7ecfff;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    margin-bottom: 10px;
  }
  .upgrade-title::before { content: '‚≠ê'; font-size: 14px; }
  .upgrade-text { font-size: 14px; color: rgba(240,250,255,0.7); line-height: 1.65; }
  .upgrade-text strong { color: #7ecfff; font-weight: 600; }

  .case-box {
    background: rgba(95,255,194,0.04);
    border: 1px solid rgba(95,255,194,0.1);
    border-radius: 12px;
    padding: 16px 20px;
    margin-bottom: 28px;
  }
  .case-label { font-size: 11px; color: var(--success); font-family: 'Syne', sans-serif; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 6px; }
  .case-text { font-size: 13px; color: rgba(240,238,255,0.65); line-height: 1.6; font-style: italic; }

  .emotional-close {
    text-align: center;
    font-size: 14px;
    color: var(--muted);
    margin-bottom: 28px;
    line-height: 1.6;
  }
  .emotional-close strong { color: var(--text); }

  .divider {
    height: 1px;
    background: var(--border);
    margin: 28px 0;
  }

  .tip-box {
    background: rgba(61,232,160,0.03);
    border: 1px solid rgba(61,232,160,0.12);
    border-radius: 12px;
    padding: 16px 20px;
    margin-top: 20px;
  }
  .tip-label { font-size: 11px; color: #3de8a0; font-family: 'Syne', sans-serif; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 8px; }
  .tip-text { font-size: 13px; color: var(--muted); line-height: 1.6; }
  .tip-text strong { color: rgba(240,250,255,0.85); }

  @media (max-width: 560px) {
    .card { padding: 32px 24px; }
    .fields { grid-template-columns: 1fr; }
    .stats-row { gap: 16px; }
    .price-box { flex-direction: column; gap: 8px; }
    .price-divider { width: 100%; height: 1px; }
  }
</style>
</head>
<body>

<div class="container">
  <div class="progress-wrap" id="progressWrap">
    <div class="progress-label">Paso <span id="stepLabel">1</span> de 4</div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
  </div>

  <!-- INTRO -->
  <div class="card active" id="step0">
    <div class="badge">Diagn√≥stico inteligente ¬∑ 60 segundos</div>
    <h1>Descubre qu√© <span>Worker Digital</span> necesita tu negocio</h1>
    <p class="sub">En menos de 1 minuto sabr√°s qu√© asistente puede atender, vender y organizar tu negocio autom√°ticamente ‚Äî sin que t√∫ est√©s presente.</p>
    <div class="stats-row">
      <div class="stat">
        <span class="stat-num">5</span>
        <span class="stat-label">Workers disponibles</span>
      </div>
      <div class="stat-divider"></div>
      <div class="stat">
        <span class="stat-num">24/7</span>
        <span class="stat-label">Atenci√≥n continua</span>
      </div>
      <div class="stat-divider"></div>
      <div class="stat">
        <span class="stat-num">0</span>
        <span class="stat-label">Horas de tu tiempo</span>
      </div>
    </div>
    <button class="btn btn-primary" onclick="goTo(1)">Empezar diagn√≥stico ‚Üí</button>
  </div>

  <!-- Q1 -->
  <div class="card" id="step1">
    <div class="q-eyebrow">Pregunta 1 ¬∑ Fricci√≥n principal</div>
    <h2>¬øD√≥nde est√° tu mayor problema hoy?</h2>
    <p class="q-helper">Puedes elegir todas las que apliquen a tu negocio.</p>
    <div class="options" id="q1opts">
      <div class="option" onclick="selectOpt(this,'q1','wa')">
        <span class="opt-emoji">üí¨</span>
        <span class="opt-text">No logro responder todos los WhatsApp</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q1','citas')">
        <span class="opt-emoji">üìÖ</span>
        <span class="opt-text">Se me olvidan citas o los clientes no asisten</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q1','reactivar')">
        <span class="opt-emoji">üîÑ</span>
        <span class="opt-text">Tengo clientes que no regresan</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q1','volumen')">
        <span class="opt-emoji">üìä</span>
        <span class="opt-text">Atiendo mucho volumen y necesito m√°s control</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q1','reportes')">
        <span class="opt-emoji">üìà</span>
        <span class="opt-text">Quiero reportes y datos para crecer</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q1','llamadas')">
        <span class="opt-emoji">üìû</span>
        <span class="opt-text">Pierdo llamadas telef√≥nicas</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q1','unsure')">
        <span class="opt-emoji">ü§î</span>
        <span class="opt-text">No estoy seguro</span>
        <div class="opt-dot"></div>
      </div>
    </div>
    <button class="btn btn-primary" id="btn1" disabled onclick="goTo(2)">Continuar ‚Üí</button>
  </div>

  <!-- Q2 -->
  <div class="card" id="step2">
    <div class="q-eyebrow">Pregunta 2 ¬∑ Impacto real</div>
    <h2>¬øQu√© consecuencia est√°s viviendo ahora mismo?</h2>
    <p class="q-helper">Selecciona todas las que sientas que te aplican ahora mismo.</p>
    <div class="options" id="q2opts">
      <div class="option" onclick="selectOpt(this,'q2','ventas')">
        <span class="opt-emoji">üí∏</span>
        <span class="opt-text">Estoy perdiendo ventas</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q2','saturado')">
        <span class="opt-emoji">üò©</span>
        <span class="opt-text">Mi equipo est√° saturado</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q2','dependencia')">
        <span class="opt-emoji">üîí</span>
        <span class="opt-text">Todo depende de m√≠ y no puedo desconectarme</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q2','control')">
        <span class="opt-emoji">üåÄ</span>
        <span class="opt-text">No tengo control de lo que pasa en el negocio</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q2','escalar')">
        <span class="opt-emoji">üìê</span>
        <span class="opt-text">Me cuesta crecer sin contratar m√°s gente</span>
        <div class="opt-dot"></div>
      </div>
    </div>
    <button class="btn btn-primary" id="btn2" disabled onclick="goTo(3)">Continuar ‚Üí</button>
  </div>

  <!-- Q3 -->
  <div class="card" id="step3">
    <div class="q-eyebrow">Pregunta 3 ¬∑ Tu objetivo</div>
    <h2>¬øQu√© quieres lograr en los pr√≥ximos 3 meses?</h2>
    <p class="q-helper">Puedes marcar m√°s de uno ‚Äî todos cuentan para tu diagn√≥stico.</p>
    <div class="options" id="q3opts">
      <div class="option" onclick="selectOpt(this,'q3','tiempo')">
        <span class="opt-emoji">‚è±Ô∏è</span>
        <span class="opt-text">Ahorrar tiempo en tareas repetitivas</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q3','ventas')">
        <span class="opt-emoji">üöÄ</span>
        <span class="opt-text">Vender m√°s sin esfuerzo extra</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q3','atencion')">
        <span class="opt-emoji">üåü</span>
        <span class="opt-text">Mejorar la atenci√≥n al cliente</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q3','recuperar')">
        <span class="opt-emoji">üéØ</span>
        <span class="opt-text">Recuperar clientes inactivos</span>
        <div class="opt-dot"></div>
      </div>
      <div class="option" onclick="selectOpt(this,'q3','escalar')">
        <span class="opt-emoji">üì°</span>
        <span class="opt-text">Escalar ordenadamente sin caos</span>
        <div class="opt-dot"></div>
      </div>
    </div>
    <button class="btn btn-primary" id="btn3" disabled onclick="goTo(4)">Continuar ‚Üí</button>
  </div>

  <!-- DATOS -->
  <div class="card" id="step4">
    <div class="q-eyebrow">√öltimo paso ¬∑ Tus datos</div>
    <h2>¬øA qui√©n le mostramos los resultados?</h2>
    <p class="q-helper">Tu diagn√≥stico personalizado est√° listo. Solo necesitamos un poco m√°s para mostr√°rtelo.</p>
    <div class="fields">
      <div class="field">
        <label>Nombre *</label>
        <input type="text" id="fname" placeholder="Tu nombre" oninput="clearErr('fname')" />
        <span class="field-error" id="err-fname">Por favor ingresa tu nombre</span>
      </div>
      <div class="field">
        <label>Empresa *</label>
        <input type="text" id="fempresa" placeholder="Tu negocio" oninput="clearErr('fempresa')" />
        <span class="field-error" id="err-fempresa">Por favor ingresa tu empresa</span>
      </div>
      <div class="field">
        <label>WhatsApp *</label>
        <input type="tel" id="fwa" placeholder="+51 999 000 000" oninput="clearErr('fwa')" />
        <span class="field-error" id="err-fwa">Ingresa tu n√∫mero de WhatsApp</span>
      </div>
      <div class="field">
        <label>Email *</label>
        <input type="email" id="femail" placeholder="tu@email.com" oninput="clearErr('femail')" />
        <span class="field-error" id="err-femail">Ingresa un email v√°lido</span>
      </div>
      <div class="field full">
        <label>Rubro del negocio *</label>
        <input type="text" id="frubro" placeholder="Ej: Cl√≠nica, Restaurante, Academia..." oninput="clearErr('frubro')" />
        <span class="field-error" id="err-frubro">Cu√©ntanos el rubro de tu negocio</span>
      </div>
      <div class="field full">
        <label>¬øCu√°ntos mensajes o llamadas recibes por d√≠a? *</label>
        <select id="fvolumen" onchange="clearErr('fvolumen')">
          <option value="" disabled selected>Selecciona un rango</option>
          <option value="bajo">Menos de 20</option>
          <option value="medio">20 ‚Äì 60</option>
          <option value="alto">60 ‚Äì 150</option>
          <option value="muyalto">M√°s de 150</option>
        </select>
        <span class="field-error" id="err-fvolumen">Selecciona un rango de volumen</span>
      </div>
    </div>
    <button class="btn btn-primary" onclick="showResult()">Ver mi resultado ‚Üí</button>
    <button class="btn btn-ghost" onclick="goTo(3)">‚Üê Volver</button>
  </div>

  <!-- RESULT -->
  <div class="card" id="step5">
    <div id="resultContent"></div>
  </div>
</div>

<script>
  // Multi-select: store arrays of values
  const answers = { q1: [], q2: [], q3: [] };

  function goTo(step) {
    document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
    document.getElementById('step' + step).classList.add('active');
    const wrap = document.getElementById('progressWrap');
    if (step === 0) { wrap.classList.remove('visible'); return; }
    wrap.classList.add('visible');
    const steps = [1,2,3,4];
    const idx = steps.indexOf(step);
    const pct = idx >= 0 ? ((idx+1)/steps.length)*100 : 100;
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('stepLabel').textContent = step <= 4 ? step : 4;
    window.scrollTo({top:0, behavior:'smooth'});
  }

  function selectOpt(el, qKey, val) {
    // Toggle selection
    if (el.classList.contains('selected')) {
      el.classList.remove('selected');
      answers[qKey] = answers[qKey].filter(v => v !== val);
    } else {
      el.classList.add('selected');
      if (!answers[qKey].includes(val)) answers[qKey].push(val);
    }
    // Enable/disable button
    const btnMap = { q1:'btn1', q2:'btn2', q3:'btn3' };
    if (btnMap[qKey]) {
      document.getElementById(btnMap[qKey]).disabled = answers[qKey].length === 0;
    }
  }

  // Form validation helpers
  function clearErr(id) {
    const el = document.getElementById(id);
    const err = document.getElementById('err-' + id);
    if (el) el.classList.remove('error');
    if (err) err.classList.remove('visible');
  }

  function showErr(id, msg) {
    const el = document.getElementById(id);
    const err = document.getElementById('err-' + id);
    if (el) el.classList.add('error');
    if (err) { if (msg) err.textContent = msg; err.classList.add('visible'); }
  }

  function validateForm() {
    let valid = true;
    const fname   = document.getElementById('fname').value.trim();
    const fempresa= document.getElementById('fempresa').value.trim();
    const fwa     = document.getElementById('fwa').value.trim();
    const femail  = document.getElementById('femail').value.trim();
    const frubro  = document.getElementById('frubro').value.trim();
    const fvolumen= document.getElementById('fvolumen').value;

    if (!fname)    { showErr('fname');    valid = false; }
    if (!fempresa) { showErr('fempresa'); valid = false; }
    if (!fwa || fwa.replace(/\D/g,'').length < 7) {
      showErr('fwa', 'Ingresa un n√∫mero v√°lido (m√≠nimo 7 d√≠gitos)');
      valid = false;
    }
    const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!femail || !emailRe.test(femail)) {
      showErr('femail', 'Ingresa un email v√°lido');
      valid = false;
    }
    if (!frubro)   { showErr('frubro');   valid = false; }
    if (!fvolumen) { showErr('fvolumen'); valid = false; }

    return valid;
  }

  const WORKERS = {
    SOPHIE: {
      name: 'Sophie',
      emoji: 'üí¨',
      role: 'Atenci√≥n y Citas por WhatsApp',
      desc: 'Sophie es la soluci√≥n perfecta para negocios que reciben mensajes constantemente y no logran responder a tiempo. Act√∫a como una recepcionista virtual que nunca duerme: responde, agenda, confirma y transfiere ‚Äî sin que t√∫ est√©s presente.',
      features: [
        'Responde mensajes autom√°ticamente las 24 horas',
        'Agenda, cambia y cancela citas sin intervenci√≥n humana',
        'Env√≠a confirmaciones y recordatorios autom√°ticos',
        'Pide datos faltantes a los clientes',
        'Transfiere a humano cuando es necesario'
      ],
      install: 500, mes: 300,
      case: 'Una cl√≠nica dental pas√≥ de perder 15 citas semanales a tener lista de espera llena en 30 d√≠as con Sophie gestionando su WhatsApp.'
    },
    TIM: {
      name: 'Tim',
      emoji: 'üîÑ',
      role: 'Recordatorios y Reactivaci√≥n',
      desc: 'Tim es el especialista en recuperar lo que ya tienes: clientes que dejaron de comprar, citas que se olvidaron, promos que nunca llegaron a tiempo. Es tu equipo de retenci√≥n trabajando solo.',
      features: [
        'Env√≠a recordatorios autom√°ticos antes de cada cita',
        'Reactiva clientes que no han comprado en semanas',
        'Env√≠a promociones segmentadas al momento correcto',
        'Segmenta tu base de clientes por comportamiento',
        'Te notifica cuando alguien responde para que act√∫es'
      ],
      install: 500, mes: 300,
      case: 'Un spa reactiv√≥ el 38% de sus clientes inactivos en el primer mes usando Tim con mensajes personalizados de reactivaci√≥n.'
    },
    VALERY: {
      name: 'Valery',
      emoji: '‚≠ê',
      role: 'Atenci√≥n + Seguimiento + Historial',
      desc: 'Valery lo tiene todo: la atenci√≥n de Sophie, la reactivaci√≥n de Tim, m√°s historial completo por cliente y m√©tricas reales. Es el Worker m√°s recomendado para negocios con volumen que quieren crecer con datos.',
      features: [
        'Todo lo que hace Sophie + todo lo que hace Tim',
        'Historial completo de cada cliente en un panel',
        'M√©tricas de mensajes y efectividad de campa√±as',
        'Ideal para negocios con alto volumen de atenci√≥n',
        'Toma decisiones con datos reales de tu negocio'
      ],
      install: 500, mes: 400,
      case: 'Una academia de idiomas con 200+ alumnos redujo su carga operativa en un 60% y aument√≥ renovaciones en 3 meses con Valery.'
    },
    MAX: {
      name: 'Max',
      emoji: 'üìä',
      role: 'Control Total + Reportes',
      desc: 'Max es para l√≠deres que toman decisiones con datos. Incluye todo lo anterior m√°s reportes autom√°ticos, an√°lisis de citas, identificaci√≥n de clientes frecuentes y detecci√≥n de d√≠as flojos para actuar antes.',
      features: [
        'Todo lo de Valery m√°s reportes autom√°ticos',
        'An√°lisis detallado de citas y conversiones',
        'Identifica tus clientes m√°s valiosos',
        'Detecta d√≠as flojos y oportunidades de campa√±a',
        'Dashboard ejecutivo para decisiones inteligentes'
      ],
      install: 500, mes: 500,
      case: 'Un centro m√©dico us√≥ los reportes de Max para detectar que los martes ten√≠an 40% menos citas ‚Äî lanzaron una promo y llenaron la agenda.'
    },
    LUKE: {
      name: 'Luke',
      emoji: 'üìû',
      role: 'Atenci√≥n de Llamadas Telef√≥nicas',
      desc: 'Luke es el √∫nico Worker que trabaja con voz. Contesta todas tus llamadas, agenda en tiempo real, responde preguntas frecuentes y transfiere cuando es necesario. Nunca m√°s una llamada perdida.',
      features: [
        'Contesta el 100% de las llamadas, las 24 horas',
        'Agenda durante la llamada sin humano presente',
        'Responde preguntas frecuentes con voz natural',
        'Transfiere a humano cuando la situaci√≥n lo requiere',
        'Registra cada llamada con resumen autom√°tico'
      ],
      install: 500, mes: 500,
      case: 'Una cl√≠nica veterinaria perd√≠a 30 llamadas diarias. Con Luke, recuperaron el 100% y aumentaron nuevos clientes un 25% el primer mes.'
    }
  };

  const UPGRADE_MAP = {
    SOPHIE: { name:'VALERY', reason:'Si tu volumen crece o quieres ver exactamente qu√© est√° pasando en tu negocio, Valery te da el historial, las m√©tricas y el control que Sophie no tiene.' },
    TIM:    { name:'VALERY', reason:'Si adem√°s de reactivar quieres atender bien y tener historial de cada cliente, Valery combina todo en un solo Worker potente.' },
    VALERY: { name:'MAX',    reason:'Cuando tu negocio est√© listo para tomar decisiones con datos reales, Max te da los reportes y an√°lisis que Valery no tiene.' },
    MAX:    { name:null,     reason:null },
    LUKE:   { name:'MAX',    reason:'Si tambi√©n tienes WhatsApp activo y quieres reportes cruzados de llamadas y mensajes, Max es el nivel final de control total.' }
  };

  function mapWorker(q1arr, q2arr, q3arr, volumen) {
    // Priority scoring
    const scores = { SOPHIE:0, TIM:0, VALERY:0, MAX:0, LUKE:0 };

    q1arr.forEach(q1 => {
      if (q1 === 'wa')       scores.SOPHIE  += 3;
      if (q1 === 'citas')    scores.SOPHIE  += 3;
      if (q1 === 'reactivar') scores.TIM    += 3;
      if (q1 === 'volumen')  scores.VALERY  += 3;
      if (q1 === 'reportes') scores.MAX     += 3;
      if (q1 === 'llamadas') scores.LUKE    += 3;
      if (q1 === 'unsure')   scores.SOPHIE  += 1;
    });
    q2arr.forEach(q2 => {
      if (q2 === 'control')  scores.MAX     += 2;
      if (q2 === 'escalar')  scores.VALERY  += 2;
      if (q2 === 'saturado') scores.VALERY  += 1;
      if (q2 === 'ventas')   scores.SOPHIE  += 1;
    });
    q3arr.forEach(q3 => {
      if (q3 === 'escalar')  scores.MAX     += 2;
      if (q3 === 'recuperar') scores.TIM    += 2;
      if (q3 === 'ventas')   scores.VALERY  += 1;
    });
    // Volume boost
    if (volumen === 'alto' || volumen === 'muyalto') {
      scores.VALERY += 2; scores.MAX += 1;
    }
    // Pick highest score
    let best = 'SOPHIE';
    let bestScore = -1;
    Object.entries(scores).forEach(([k,v]) => { if(v > bestScore) { bestScore=v; best=k; } });
    return best;
  }

  function showResult() {
    if (!validateForm()) {
      // Scroll to first error
      const firstErr = document.querySelector('.field input.error, .field select.error');
      if (firstErr) firstErr.scrollIntoView({ behavior:'smooth', block:'center' });
      return;
    }

    const name = document.getElementById('fname').value.trim();
    const wa   = document.getElementById('fwa').value.trim();
    const email= document.getElementById('femail').value.trim();
    const vol  = document.getElementById('fvolumen').value;

    const workerKey = mapWorker(answers.q1, answers.q2, answers.q3, vol);
    const worker    = WORKERS[workerKey];
    const up        = UPGRADE_MAP[workerKey];

    // Send to Formspree (replace with your endpoint)
    const formData = {
      nombre: name,
      empresa: document.getElementById('fempresa').value,
      whatsapp: wa,
      email,
      rubro: document.getElementById('frubro').value,
      volumen: vol,
      q1_fricciones: answers.q1.join(', '),
      q2_impactos: answers.q2.join(', '),
      q3_objetivos: answers.q3.join(', '),
      worker_recomendado: workerKey,
      _subject: `Nuevo diagn√≥stico Worker Digital - ${name}`
    };

    fetch('https://formspree.io/f/mreavzny', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
      body: JSON.stringify(formData)
    }).catch(() => {}); // silent - result shows regardless

    const waMsg = encodeURIComponent(`Hola, acabo de completar el diagn√≥stico y quiero ver c√≥mo implementar ${worker.name} en mi negocio.`);
    const waLink = `https://wa.me/${wa ? wa.replace(/\D/g,'') : '51999000000'}?text=${waMsg}`;
    const waConsulta = `https://wa.me/51982247314?text=${waMsg}`;

    const upBox = up.name ? `
      <div class="upgrade-box">
        <div class="upgrade-title">Tu siguiente nivel de crecimiento</div>
        <div class="upgrade-text">
          Hoy necesitas <strong>${worker.name}</strong>. Pero si quieres escalar sin perder control, 
          <strong>${WORKERS[up.name].name}</strong> es tu pr√≥ximo paso: ${up.reason}
        </div>
      </div>` : '';

    document.getElementById('resultContent').innerHTML = `
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:24px;flex-wrap:wrap;">
        <span class="worker-tag tag-ideal">‚ú¶ Worker ideal</span>
        ${up.name ? `<span class="worker-tag tag-upgrade">‚Üë Upgrade sugerido: ${WORKERS[up.name].name}</span>` : ''}
      </div>

      <div class="result-header">
        <div>
          <div style="font-size:48px;line-height:1;margin-bottom:8px;">${worker.emoji}</div>
          <div class="result-name"><span>${worker.name}</span></div>
          <div style="color:var(--muted);font-size:14px;margin-top:6px;">${worker.role}</div>
        </div>
      </div>

      <p class="result-desc">${worker.desc}</p>

      <div class="worker-features">
        ${worker.features.map(f => `<div class="feature-item">${f}</div>`).join('')}
      </div>

      <div class="case-box">
        <div class="case-label">üìå Caso real</div>
        <div class="case-text">${worker.case}</div>
      </div>

      <div class="price-box">
        <div class="price-item">
          <span class="price-label">Instalaci√≥n √∫nica</span>
          <span class="price-value">S/. ${worker.install}</span>
        </div>
        <div class="price-divider"></div>
        <div class="price-item">
          <span class="price-label">Mensualidad</span>
          <span class="price-value">S/. ${worker.mes}/mes</span>
        </div>
        <div class="price-item">
          <span class="price-label">Inversi√≥n a√±o 1</span>
          <span class="price-value">S/. ${worker.install + worker.mes*12}</span>
        </div>
      </div>

      ${upBox}

      <div class="emotional-close">
        ${name.charAt(0).toUpperCase() + name.slice(1)}, tu negocio ya est√° listo para trabajar solo. <br/>
        <strong>El √∫nico paso que falta eres t√∫.</strong>
      </div>

      <button class="btn btn-primary" onclick="window.open('https://calendly.com/marialecont340/30min','_blank')">
        Agendar reuni√≥n virtual ‚Üí
      </button>

      <a href="${waConsulta}" target="_blank" class="btn btn-wa">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
        Consultar por WhatsApp
      </a>

      <div class="divider"></div>

      <div class="tip-box">
        <div class="tip-label">üí° Potencia tu Worker con automatizaciones</div>
        <div class="tip-text">Conecta <strong>${worker.name}</strong> con tu CRM, Google Sheets o sistema de pagos usando <strong>Make, Zapier o n8n</strong>. Cada respuesta puede actualizar tu base de datos, crear tareas o disparar secuencias de seguimiento autom√°ticas ‚Äî sin c√≥digo.</div>
      </div>

      <div class="tip-box" style="margin-top:12px;background:rgba(95,255,194,0.03);border-color:rgba(95,255,194,0.1);">
        <div class="tip-label" style="color:var(--success);">üéØ C√≥mo usar esto para abrir una llamada consultiva</div>
        <div class="tip-text">Comparte este diagn√≥stico con tu equipo de ventas: el Worker recomendado, el impacto declarado y el objetivo del prospecto son los tres puntos de apertura perfectos. <strong>Empieza preguntando: "¬øCu√°nto estimas que pierdes hoy por no tener esto resuelto?"</strong></div>
      </div>
    `;

    goTo(5);
    document.getElementById('progressFill').style.width = '100%';
    document.getElementById('stepLabel').textContent = '‚úì';
  }
</script>
</body>
</html>
